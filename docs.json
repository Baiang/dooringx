[{"html":"<p>dooringx-lib 是 dooringx 的基座，是移除了 dooringx 插件的可视化拖拽框架。</p>\n<p>dooringx-lib 提供自己的一套数据流事件机制以及弹窗等解决方案，可以让你更快地自己定制开发可视化拖拽平台。</p>\n","metadata":{"title":"dooringx-lib 是什么？","sTitle":"介绍","order":"1"},"subsections":[],"slug":"dooringxlib","order":1,"file":"1.1.md","sTitle":"介绍"},{"html":"<p>dooringx-lib 在运行时维护一套数据流，主要分为json数据部分，左侧组件部分，右侧配置项部分，快捷键部分，弹窗部分，事件与函数部分，数据源部分。</p>\n<p>其除了提供基础的拖拽、移动、缩放、全选、旋转等功能外，还可以使用暴露的组件。如果觉得组件不够定制化，可以调整样式或者自己重新写。</p>\n","metadata":{"title":"dooringx-lib 如何工作？","sTitle":"介绍","order":"2"},"subsections":[],"slug":"dooringxlib","order":2,"file":"1.2.md","sTitle":"介绍"},{"html":"\n\t\t\t\t\t<h4>\n\t\t\t\t\t\t<span  id=\"5a6j6kof\"  ></span>\n\t\t\t\t\t\t<a  href=\"docs#5a6j6kof\" class=\"anchor\" aria-hidden=\"true\"></a>\n\t\t\t\t\t\t安装\n\t\t\t\t\t</h4><p>使用 npm 或者 yarn 安装</p>\n<div class='code-block'><pre class='language-bash'><code><span class=\"token function\">npm</span> i dooringx-lib</code></pre></div><p>dooringx-lib在编辑时提供两种容器，可以根据需要选择使用。</p>\n<p>一种是普通容器，一种是iframe容器，这2种容器在某些实现上略有不同。</p>\n<p>使用普通容器即在编辑时为普通的div并非iframe，而使用iframe则编辑时看见的为iframe内容。在预览时，使用preview组件，preview可以放到任何容器，包括去使用iframe查看。</p>\n<p>建议预览时使用iframe查看preview，如果有弹窗，在非iframe或pc中会显示异常。</p>\n<p>iframe容器由于使用postmessage通信，所以在操作上可能会有略微延迟。如果对样式隔离要求不高可以使用普通容器，预览的样式正常即可。</p>\n<p>普通容器使用参考demo:</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n\tRightConfig<span class=\"token punctuation\">,</span>\n\tContainer<span class=\"token punctuation\">,</span>\n\tuseStoreState<span class=\"token punctuation\">,</span>\n\tinnerContainerDragUp<span class=\"token punctuation\">,</span>\n\tLeftConfig<span class=\"token punctuation\">,</span>\n\tContainerWrapper<span class=\"token punctuation\">,</span>\n\tControl<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'dooringx-lib'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> configContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/layouts'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useCallback <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">PREVIEWSTATE</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/constant'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> HeaderHeight <span class=\"token operator\">=</span> <span class=\"token string\">'40px'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">IndexPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>configContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">everyFn</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">const</span> subscribeFn <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\tlocalStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PREVIEWSTATE</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span><span class=\"token function\">getStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>config<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useStoreState</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">,</span> subscribeFn<span class=\"token punctuation\">,</span> everyFn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token operator\">&lt;</span>div <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">innerContainerDragUp</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> height<span class=\"token operator\">:</span> HeaderHeight <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\t\t\t\thead\n\t\t\t\t<span class=\"token operator\">&lt;</span>button\n\t\t\t\t\tonClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\twindow<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/iframe'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token operator\">></span>\n\t\t\t\t\tgo preview\n\t\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span>button\n\t\t\t\t\tonClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\twindow<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/preview'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token operator\">></span>\n\t\t\t\t\tgo preview\n\t\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span>div\n\t\t\t\tstyle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n\t\t\t\t\tdisplay<span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\tjustifyContent<span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\talignItems<span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\theight<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">calc(100vh - </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>HeaderHeight<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n\t\t\t\t\twidth<span class=\"token operator\">:</span> <span class=\"token string\">'100vw'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> height<span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\t\t\t\t\t<span class=\"token operator\">&lt;</span>LeftConfig config<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>LeftConfig<span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\n\t\t\t\t<span class=\"token operator\">&lt;</span>ContainerWrapper config<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\t\t\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">></span>\n\t\t\t\t\t\t<span class=\"token operator\">&lt;</span>Control\n\t\t\t\t\t\t\tconfig<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">}</span>\n\t\t\t\t\t\t\tstyle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> position<span class=\"token operator\">:</span> <span class=\"token string\">'fixed'</span><span class=\"token punctuation\">,</span> bottom<span class=\"token operator\">:</span> <span class=\"token string\">'60px'</span><span class=\"token punctuation\">,</span> right<span class=\"token operator\">:</span> <span class=\"token string\">'450px'</span><span class=\"token punctuation\">,</span> zIndex<span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t\t\t\t\t<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Control<span class=\"token operator\">></span>\n\t\t\t\t\t\t<span class=\"token operator\">&lt;</span>Container state<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span> config<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">}</span> context<span class=\"token operator\">=</span><span class=\"token string\">\"edit\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Container<span class=\"token operator\">></span>\n\t\t\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span><span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ContainerWrapper<span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"rightrender\"</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> height<span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\t\t\t\t\t<span class=\"token operator\">&lt;</span>RightConfig state<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span> config<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>RightConfig<span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>iframe容器使用参考demo：</p>\n<p>index.tsx</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n\tRightConfig<span class=\"token punctuation\">,</span>\n\tuseStoreState<span class=\"token punctuation\">,</span>\n\tinnerContainerDragUp<span class=\"token punctuation\">,</span>\n\tLeftConfig<span class=\"token punctuation\">,</span>\n\tIframeContainerWrapper<span class=\"token punctuation\">,</span>\n\tControl<span class=\"token punctuation\">,</span>\n\tuseIframeHook<span class=\"token punctuation\">,</span>\n\tIframeTarget<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'dooringx-lib'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> configContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/layouts'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useCallback <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">PREVIEWSTATE</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/constant'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> HeaderHeight <span class=\"token operator\">=</span> <span class=\"token string\">'40px'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">IndexPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>configContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">const</span> subscribeFn <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\tlocalStorage<span class=\"token punctuation\">.</span><span class=\"token function\">setItem</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PREVIEWSTATE</span><span class=\"token punctuation\">,</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">stringify</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">.</span><span class=\"token function\">getStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>config<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useStoreState</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">,</span> subscribeFn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">useIframeHook</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>location<span class=\"token punctuation\">.</span>origin<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">/container</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token operator\">&lt;</span>div <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">innerContainerDragUp</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> height<span class=\"token operator\">:</span> HeaderHeight <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\t\t\t\thead\n\t\t\t\t<span class=\"token operator\">&lt;</span>button\n\t\t\t\t\tonClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\twindow<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/iframe'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token operator\">></span>\n\t\t\t\t\tgo preview\n\t\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span>button\n\t\t\t\t\tonClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\twindow<span class=\"token punctuation\">.</span><span class=\"token function\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/preview'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token operator\">></span>\n\t\t\t\t\tgo preview\n\t\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span>div\n\t\t\t\tstyle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n\t\t\t\t\tdisplay<span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\tjustifyContent<span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\talignItems<span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\theight<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">calc(100vh - </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>HeaderHeight<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">)</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n\t\t\t\t\twidth<span class=\"token operator\">:</span> <span class=\"token string\">'100vw'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span>div style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> height<span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\t\t\t\t\t<span class=\"token operator\">&lt;</span>LeftConfig config<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>LeftConfig<span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\n\t\t\t\t<span class=\"token operator\">&lt;</span>IframeContainerWrapper\n\t\t\t\t\tconfig<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">}</span>\n\t\t\t\t\textra<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t<span class=\"token operator\">&lt;</span>Control\n\t\t\t\t\t\t\tconfig<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">}</span>\n\t\t\t\t\t\t\tstyle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> position<span class=\"token operator\">:</span> <span class=\"token string\">'fixed'</span><span class=\"token punctuation\">,</span> bottom<span class=\"token operator\">:</span> <span class=\"token string\">'60px'</span><span class=\"token punctuation\">,</span> right<span class=\"token operator\">:</span> <span class=\"token string\">'450px'</span><span class=\"token punctuation\">,</span> zIndex<span class=\"token operator\">:</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t\t\t\t\t<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Control<span class=\"token operator\">></span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token operator\">></span>\n\t\t\t\t\t<span class=\"token operator\">&lt;</span>IframeTarget\n\t\t\t\t\t\tconfig<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">}</span>\n\t\t\t\t\t\tiframeProps<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t\tsrc<span class=\"token operator\">:</span> <span class=\"token string\">'/container'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t\t\t\t<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>IframeTarget<span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>IframeContainerWrapper<span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"rightrender\"</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> height<span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\t\t\t\t\t<span class=\"token operator\">&lt;</span>RightConfig state<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">}</span> config<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>RightConfig<span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>container 路由：</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> configContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/layouts'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> IframeContainer <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'dooringx-lib'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">ContainerPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>configContext<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span>IframeContainer config<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">}</span> context<span class=\"token operator\">=</span><span class=\"token string\">\"edit\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>IframeContainer<span class=\"token operator\">></span>\n\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> ContainerPage<span class=\"token punctuation\">;</span></code></pre></div><p>预览时preview套iframe:</p>\n<div class='code-block'><pre class='language-markup'><code>\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n\t\t\t<span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token value css language-css\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span></span></span></span>\n\t\t\t\t<span class=\"token attr-name\"><span class=\"token namespace\">display:</span></span> <span class=\"token attr-name\">'flex',</span>\n\t\t\t\t<span class=\"token attr-name\"><span class=\"token namespace\">justifyContent:</span></span> <span class=\"token attr-name\">'center',</span>\n\t\t\t\t<span class=\"token attr-name\"><span class=\"token namespace\">alignItems:</span></span> <span class=\"token attr-name\">'center',</span>\n\t\t\t<span class=\"token attr-name\">}}</span>\n\t\t<span class=\"token punctuation\">></span></span>\n\t\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>iframe</span> <span class=\"token special-attr\"><span class=\"token attr-name\">style</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token value css language-css\"><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span></span></span></span> <span class=\"token attr-name\"><span class=\"token namespace\">width:</span></span> <span class=\"token attr-name\">'375px',</span> <span class=\"token attr-name\"><span class=\"token namespace\">height:</span></span> <span class=\"token attr-name\">'667px'</span> <span class=\"token attr-name\">}}</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/preview<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>iframe</span><span class=\"token punctuation\">></span></span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div><p>preview路由：</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> <span class=\"token constant\">PREVIEWSTATE</span> <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'@/constant'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Preview<span class=\"token punctuation\">,</span> UserConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'dooringx-lib'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> plugin <span class=\"token keyword\">from</span> <span class=\"token string\">'../../plugin'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UserConfig</span><span class=\"token punctuation\">(</span>plugin<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">PreviewPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> localStorage<span class=\"token punctuation\">.</span><span class=\"token function\">getItem</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PREVIEWSTATE</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token keyword\">const</span> json <span class=\"token operator\">=</span> <span class=\"token constant\">JSON</span><span class=\"token punctuation\">.</span><span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tconfig<span class=\"token punctuation\">.</span><span class=\"token function\">resetData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>json<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">{</span>\n\t\t\tconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'err'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token operator\">&lt;</span>div\n\t\t\tstyle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n\t\t\t\tdisplay<span class=\"token operator\">:</span> <span class=\"token string\">'flex'</span><span class=\"token punctuation\">,</span>\n\t\t\t\tjustifyContent<span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n\t\t\t\talignItems<span class=\"token operator\">:</span> <span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t<span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span>Preview config<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Preview<span class=\"token operator\">></span>\n\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> PreviewPage<span class=\"token punctuation\">;</span></code></pre></div><p>有关 api 部分请参考 api</p>\n","metadata":{"title":"快速上手","sTitle":"介绍","order":"3"},"subsections":[{"slug":"5a6j6kof","title":"安装","level":3}],"slug":"5br6ycf5lik5oml","order":3,"file":"1.3.md","sTitle":"介绍"},{"html":"<p>store 类似于 redux 的概念，它内部实现了 redo、undo、发布订阅、置换数据、强制刷新等功能。</p>\n<p>store 可以在 config 中获取。</p>\n<p>在最开始时，需要通过 useStoreState 与 react 结合，此时可以在任意位置使用 store.forceUpdate 强刷，也可以使用 state 获取 store 中的数据。</p>\n<p>store 的最重要功能是保存着每次修改 json  队列。</p>\n<p>如果你需要更新数据，在深拷贝后使用 setData 方法进行更新。</p>\n<p>如果你需要更新时不记录在 redo 或 undo 上留下记录，那么请操作队列删除其中保存内容即可。</p>\n<p>对于改变数据后想即使看见视图更新，那么使用forceUpdate即可。</p>\n","metadata":{"title":"store","sTitle":"dooringx-lib基础","order":"4"},"subsections":[],"slug":"store","order":4,"file":"2.1.md","sTitle":"dooringx-lib基础"},{"html":"<p>dooringx-lib 的事件是在eventCenter上，它上面会集成functionCenter与一个事件链。</p>\n<p>在eventCenter中可以获取组件注册的时机。时机类似于组件生命周期一样，可以注册后在对应的时机进行调用。</p>\n<p>而functionCenter中的函数则会与时机结合，再由事件链对用户设定的队列进行统一处理。</p>\n<p>每个事件链在执行中会有上下文对象，这个对象会贯穿这个事件链。</p>\n","metadata":{"title":"事件","sTitle":"dooringx-lib基础","order":"5"},"subsections":[],"slug":"5lql5lu2","order":5,"file":"2.2.md","sTitle":"dooringx-lib基础"},{"html":"<p>dooringx-lib 的命令是由commander进行管理。</p>\n<p>内部默认提供redo与undo的命令，您可以通过插件方式增加commander。</p>\n<p>commander内部集成了快捷键配置，使用键盘事件的key进行注册，如果ctrl、alt、meta键，可加对应的加号进行组合键注册，内部忽略大小写（注意！不是忽略注册的键名大小写，而是A和a的key处理时等价）。</p>\n","metadata":{"title":"命令","sTitle":"dooringx-lib基础","order":"6"},"subsections":[],"slug":"5zg95luk","order":6,"file":"2.3.md","sTitle":"dooringx-lib基础"},{"html":"<p>dooringx-lib内置弹窗系统，弹窗系统是通过storeChanger进行转换而成。</p>\n<p>所以在某些情景制作时，可能需要考虑是否在弹窗编辑下的情况。</p>\n<p>每个弹窗是只保存block中的数据，而事件等数据只会存在主数据内。</p>\n<p>在弹窗保存后，弹窗数据会被置换于主数据内存着，需要编辑时重新置换出来。</p>\n<p>可以使用storeChanger上的方法进行判断，或者直接获取数据源数据等，具体见API。</p>\n","metadata":{"title":"弹窗","sTitle":"dooringx-lib基础","order":"7"},"subsections":[],"slug":"5by556qx","order":7,"file":"2.4.md","sTitle":"dooringx-lib基础"},{"html":"<p>dooringx-lib 的数据源和前面说的store中存储的不是一个东西。</p>\n<p>它位于dataCenter中。设计数据源的初衷是为了让不懂代码的人更好理解。</p>\n<p>事件的运行完全可以脱离数据源运行，只要使用者知道如何去填写参数。</p>\n<p>所以在事件配置时，可以多个选项在数据源中去获得数据转变为参数。</p>\n","metadata":{"title":"数据源","sTitle":"dooringx-lib基础","order":"8"},"subsections":[],"slug":"5pww5o2u5rqq","order":8,"file":"2.5.md","sTitle":"dooringx-lib基础"},{"html":"<p>dooringx-lib的插件需要一个类型为<code>Partial&lt;InitConfig&gt;</code>的对象。</p>\n<p>对于多个插件，需要使用dooringx-lib导出的<code>userConfigMerge</code>来进行合并。</p>\n<p>userConfigMerge不是所有属性都会合并，部分属性会进行覆盖。</p>\n<div class='code-block'><pre class='language-'><code> * 部分无法合并属性如果b传了会以b为准\n * initstore不合并\n * leftallregistmap合并\n * leftRenderListCategory合并\n * rightRenderListCategory合并\n * rightGlobalCustom 不合并\n * initComponentCache合并\n * initFunctionMap合并\n * initDataCenterMap合并\n * initCommandModule合并\n * initFormComponents合并</code></pre></div><p>config支持部分配置异步导入，比如左侧分类等，这个是实验性功能，所以不推荐这么做。</p>\n","metadata":{"title":"插件导入","sTitle":"dooringx-lib插件开发","order":"9"},"subsections":[],"slug":"5os5lu25a85ywl","order":9,"file":"3.1.md","sTitle":"dooringx-lib插件开发"},{"html":"<p>左侧面板传入leftRenderListCategory即可。</p>\n<div class='code-block'><pre class='language-javascript'><code>leftRenderListCategory<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n\t\ttype<span class=\"token operator\">:</span> <span class=\"token string\">'basic'</span><span class=\"token punctuation\">,</span>\n\t\ticon<span class=\"token operator\">:</span> <span class=\"token operator\">&lt;</span>HighlightOutlined <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n\t\tdisplayName<span class=\"token operator\">:</span> <span class=\"token string\">'基础组件'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n\t\ttype<span class=\"token operator\">:</span> <span class=\"token string\">'xxc'</span><span class=\"token punctuation\">,</span>\n\t\ticon<span class=\"token operator\">:</span> <span class=\"token operator\">&lt;</span>ContainerOutlined <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n\t\tcustom<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\t\tcustomRender<span class=\"token operator\">:</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>我是自定义渲染<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></code></pre></div><p>type是分类，左侧组件显示在哪个分类由该字段决定。</p>\n<p>icon则是左侧分类小图标。</p>\n<p>当custom为true时，可以使用customRender自定义渲染。</p>\n","metadata":{"title":"左侧面板","sTitle":"dooringx-lib插件开发","order":"10"},"subsections":[],"slug":"5bem5l6n6z2i5p2","order":10,"file":"3.2.md","sTitle":"dooringx-lib插件开发"},{"html":"\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span  id=\"5os5lu25a85ywl\"  ></span>\n\t\t\t\t\t\t<a  href=\"docs#5os5lu25a85ywl\" class=\"anchor\" aria-hidden=\"true\"></a>\n\t\t\t\t\t\t插件导入\n\t\t\t\t\t</h3><p>左侧组件要至于对象的LeftRegistMap中。</p>\n<p>左侧组件支持同步导入或者异步导入。</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token keyword\">const</span> LeftRegistMap<span class=\"token operator\">:</span> LeftRegistComponentMapItem<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n\t  type<span class=\"token operator\">:</span> <span class=\"token string\">'basic'</span><span class=\"token punctuation\">,</span>\n\t  component<span class=\"token operator\">:</span> <span class=\"token string\">'button'</span><span class=\"token punctuation\">,</span>\n\t  img<span class=\"token operator\">:</span> <span class=\"token string\">'icon-anniu'</span><span class=\"token punctuation\">,</span>\n\t  displayName<span class=\"token operator\">:</span> <span class=\"token string\">'按钮'</span><span class=\"token punctuation\">,</span>\n\t  <span class=\"token function-variable function\">urlFn</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./registComponents/button'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span></code></pre></div><p>如果需要异步导入组件，则需要填写urlFn，需要一个返回promise的函数。也可以支持远程载入组件，只要webpack配上就行了。</p>\n<p>如果需要同步导入组件，则需要将组件放入配置项的initComponentCache中，这样在载入时便会注册进componentRegister里。</p>\n<div class='code-block'><pre class='language-javascript'><code>initComponentCache<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\tmodalMask<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> component<span class=\"token operator\">:</span> MmodalMask <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>  \n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span  id=\"57ue5lu257yw5yaz\"  ></span>\n\t\t\t\t\t\t<a  href=\"docs#57ue5lu257yw5yaz\" class=\"anchor\" aria-hidden=\"true\"></a>\n\t\t\t\t\t\t组件编写\n\t\t\t\t\t</h3><p>组件需要导出一个由ComponentItemFactory生成的对象。</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token keyword\">const</span> MButton <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ComponentItemFactory</span><span class=\"token punctuation\">(</span>\n\t<span class=\"token string\">'button'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'按钮'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">{</span>\n\t\tstyle<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t\t\tcreatePannelOptions<span class=\"token operator\">&lt;</span>FormMap<span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\t\t\t\treceive<span class=\"token operator\">:</span> <span class=\"token string\">'text'</span><span class=\"token punctuation\">,</span> \n\t\t\t\tlabel<span class=\"token operator\">:</span> <span class=\"token string\">'文字'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\tanimate<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>createPannelOptions<span class=\"token operator\">&lt;</span>FormMap<span class=\"token punctuation\">,</span> <span class=\"token string\">'animateControl'</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token string\">'animateControl'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\tactions<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>createPannelOptions<span class=\"token operator\">&lt;</span>FormMap<span class=\"token punctuation\">,</span> <span class=\"token string\">'actionButton'</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token string\">'actionButton'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">{</span>\n\t\tprops<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token operator\">...</span>\n\t\t\ttext<span class=\"token operator\">:</span><span class=\"token string\">'yehuozhili'</span><span class=\"token comment\">// input配置项组件接收的初始值</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">,</span> store<span class=\"token punctuation\">,</span> config</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>ButtonTemp data<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>data<span class=\"token punctuation\">}</span> store<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>store<span class=\"token punctuation\">}</span> context<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>context<span class=\"token punctuation\">}</span> config<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>config<span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ButtonTemp<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token boolean\">true</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MButton<span class=\"token punctuation\">;</span>\n</code></pre></div><p>其中第一个参数为组件注册名，第二个参数用来展示使用。</p>\n<p>第三个参数用来配置右侧面板的配置项组件。其中键为右侧面板的分类，值为配置项组件数组。</p>\n<p>第四个参数会配置组件的初始值，特别注意的是，制作组件必须要有初始宽度高度（非由内容撑开），否则会在适配时全选时产生问题。</p>\n<p>这个初始值里有很多有用的属性，比如fixed代表使用固定定位，可以结合配置项更改该值，使得组件可以fixed定位。</p>\n<p>还有canDrag类似于锁定命令，锁定的元素不可拖拽。</p>\n<p>初始值里的rotate需要个对象，value代表旋转角度，canRotate 代表是否可以操作旋转。（0.7.0版本开始支持）</p>\n<p>第五个参数是个函数，你将获得配置项中的receive属性（暂且都默认该配置为receive）传来的配置，比如上例中receive的是text，则该函数中data里会收到该字段。</p>\n<p>context一般只有preview和edit，用来进行环境判断。</p>\n<p>config可以拿到所有数据，用来制作事件时使用。</p>\n<p>第六个参数resize 是为了判断是否能进行缩放，当为false时，无法进行缩放。</p>\n<p>第七个参数needPosition，某些组件移入画布后会默认采取拖拽的落点，该配置项默认为true,就是需要拖拽的位置，为false时将使用组件自身top和left定位来放置。</p>\n\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span  id=\"5lql5lu25roo5yam\"  ></span>\n\t\t\t\t\t\t<a  href=\"docs#5lql5lu25roo5yam\" class=\"anchor\" aria-hidden=\"true\"></a>\n\t\t\t\t\t\t事件注册\n\t\t\t\t\t</h3>\n\t\t\t\t\t<h4>\n\t\t\t\t\t\t<span  id=\"5pe25py65roo5yam\"  ></span>\n\t\t\t\t\t\t<a  href=\"docs#5pe25py65roo5yam\" class=\"anchor\" aria-hidden=\"true\"></a>\n\t\t\t\t\t\t时机注册\n\t\t\t\t\t</h4><p>前面说了事件有时机和函数，所以组件内可以使用hook注册时机：</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token function\">useDynamicAddEventCenter</span><span class=\"token punctuation\">(</span>pr<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pr<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-init</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'初始渲染时机'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//注册名必须带id 约定！</span>\n<span class=\"token function\">useDynamicAddEventCenter</span><span class=\"token punctuation\">(</span>pr<span class=\"token punctuation\">,</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pr<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-click</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> <span class=\"token string\">'点击执行时机'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><p>useDynamicAddEventCenter第一个参数是render的四个参数组成的对象。第二个参数是注册的时机名，必须跟id相关，这是约定，否则多个组件可能会导致名称冲突，并且方便查找该时机。</p>\n<p>注册完时机后，你需要将时机放入对应的触发位置上，比如这个button的点击执行时机就放到onclick中：</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token operator\">&lt;</span>Button\n\tonClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\teventCenter<span class=\"token punctuation\">.</span><span class=\"token function\">runEventQueue</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pr<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">-click</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span> pr<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n<span class=\"token operator\">></span>\n\tyehuozhili\n<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span> </code></pre></div><p>其中第一个参数则为注册的时机名，第二个为render函数中最后个参数config</p>\n\n\t\t\t\t\t<h4>\n\t\t\t\t\t\t<span  id=\"5ye95pww5roo5yam\"  ></span>\n\t\t\t\t\t\t<a  href=\"docs#5ye95pww5roo5yam\" class=\"anchor\" aria-hidden=\"true\"></a>\n\t\t\t\t\t\t函数注册\n\t\t\t\t\t</h4><p>函数由组件抛出，可以加载到事件链上。比如，注册个改变文本函数，那么我可以在任意组件的时机中去调用该函数，从而触发该组件改变文本。</p>\n<p>函数注册需要放入useEffect中，在组件卸载时需要卸载函数！否则会导致函数越来越多。</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">const</span> functionCenter <span class=\"token operator\">=</span> eventCenter<span class=\"token punctuation\">.</span><span class=\"token function\">getFunctionCenter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">const</span> unregist <span class=\"token operator\">=</span> functionCenter<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span>\n\t\t\t<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>pr<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>id<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">+改变文本函数</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">ctx<span class=\"token punctuation\">,</span> next<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">,</span> _eventList<span class=\"token punctuation\">,</span> iname</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token keyword\">const</span> userSelect <span class=\"token operator\">=</span> iname<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token keyword\">const</span> ctxVal <span class=\"token operator\">=</span> <span class=\"token function\">changeUserValue</span><span class=\"token punctuation\">(</span>\n\t\t\t\t\tuserSelect<span class=\"token punctuation\">[</span><span class=\"token string\">'改变文本数据源'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\targs<span class=\"token punctuation\">,</span>\n\t\t\t\t\t<span class=\"token string\">'_changeval'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\tconfig<span class=\"token punctuation\">,</span>\n\t\t\t\t\tctx\n\t\t\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token keyword\">const</span> text <span class=\"token operator\">=</span> ctxVal<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token function\">setText</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">[</span>\n\t\t\t\t<span class=\"token punctuation\">{</span>\n\t\t\t\t\tname<span class=\"token operator\">:</span> <span class=\"token string\">'改变文本数据源'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\tdata<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'ctx'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'dataSource'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\toptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\treceive<span class=\"token operator\">:</span> <span class=\"token string\">'_changeval'</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t\tmulti<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">]</span>\n\t\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token function\">unregist</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><p>函数中参数与配置见后面函数开发。</p>\n","metadata":{"title":"左侧组件","sTitle":"dooringx-lib插件开发","order":"11"},"subsections":[{"slug":"5os5lu25a85ywl","title":"插件导入","level":2},{"slug":"57ue5lu257yw5yaz","title":"组件编写","level":2},{"slug":"5lql5lu25roo5yam","title":"事件注册","level":2},{"slug":"5pe25py65roo5yam","title":"时机注册","level":3},{"slug":"5ye95pww5roo5yam","title":"函数注册","level":3}],"slug":"5bem5l6n57ue5lu2","order":11,"file":"3.3.md","sTitle":"dooringx-lib插件开发"},{"html":"<p>右侧面板的配置和左侧面板一样：</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">RightMapRenderListPropsItemCategory</span> <span class=\"token punctuation\">{</span>\n\ttype<span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n\ticon<span class=\"token operator\">:</span> ReactNode<span class=\"token punctuation\">;</span>\n\tcustom<span class=\"token operator\">?</span><span class=\"token operator\">:</span> boolean<span class=\"token punctuation\">;</span>\n\tcustomRender<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">type<span class=\"token operator\">:</span> string<span class=\"token punctuation\">,</span> current<span class=\"token operator\">:</span> IBlockType</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> ReactNode<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>type会影响左侧组件在开发时第三个参数的键名。那个键名中即代表该右侧中展示的type。</p>\n<p>icon则是可以放文字或者图标用来进行面板切换的。</p>\n<p>如果custom为true，该面板下的显示可以通过customRender自定义。</p>\n","metadata":{"title":"右侧面板","sTitle":"dooringx-lib插件开发","order":"12"},"subsections":[],"slug":"5yz5l6n6z2i5p2","order":12,"file":"3.4.md","sTitle":"dooringx-lib插件开发"},{"html":"\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span  id=\"5yz5l6n57ue5lu25a85ywl\"  ></span>\n\t\t\t\t\t\t<a  href=\"docs#5yz5l6n57ue5lu25a85ywl\" class=\"anchor\" aria-hidden=\"true\"></a>\n\t\t\t\t\t\t右侧组件导入\n\t\t\t\t\t</h3><p>导入时,只要将开发的组件配成一个对象放入initFormComponents即可。</p>\n<div class='code-block'><pre class='language-javascript'><code>initFormComponents<span class=\"token operator\">:</span> Formmodules<span class=\"token punctuation\">,</span></code></pre></div>\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span  id=\"5yz5l6n57ue5lu25bya5yr\"  ></span>\n\t\t\t\t\t\t<a  href=\"docs#5yz5l6n57ue5lu25bya5yr\" class=\"anchor\" aria-hidden=\"true\"></a>\n\t\t\t\t\t\t右侧组件开发\n\t\t\t\t\t</h3><p>首先为了良好的开发体验，需要定义个formMap类型：</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">FormBaseType</span> <span class=\"token punctuation\">{</span>\n\treceive<span class=\"token operator\">?</span><span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">FormInputType</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">FormBaseType</span> <span class=\"token punctuation\">{</span>\n\tlabel<span class=\"token operator\">:</span> string<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">FormActionButtonType</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">FormAnimateControlType</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">FormMap</span> <span class=\"token punctuation\">{</span>\n\tinput<span class=\"token operator\">:</span> FormInputType<span class=\"token punctuation\">;</span>\n\tactionButton<span class=\"token operator\">:</span> FormActionButtonType<span class=\"token punctuation\">;</span>\n\tanimateControl<span class=\"token operator\">:</span> FormAnimateControlType<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>formMap的键名就是initFormComponents键名，formMap的值对应组件需要收到的值。</p>\n<p>以input组件为例，FormInputType此时有2个属性，label,receive。</p>\n<p>那么在其开发该组件时，props会收到：</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token keyword\">interface</span> <span class=\"token class-name\">MInputProps</span> <span class=\"token punctuation\">{</span>\n\tdata<span class=\"token operator\">:</span> CreateOptionsRes<span class=\"token operator\">&lt;</span>FormMap<span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\tcurrent<span class=\"token operator\">:</span> IBlockType<span class=\"token punctuation\">;</span>\n\tconfig<span class=\"token operator\">:</span> UserConfig<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>也就是其中data是formMap类型，而current是当前点击的组件，config就不用说了。</p>\n<p>还记得在左侧组件开发中的第三个参数吗？这样就都关联起来了：</p>\n<div class='code-block'><pre class='language-javascript'><code>\nstyle<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t\t\tcreatePannelOptions<span class=\"token operator\">&lt;</span>FormMap<span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\t\t\t\treceive<span class=\"token operator\">:</span> <span class=\"token string\">'text'</span><span class=\"token punctuation\">,</span>  \n\t\t\t\tlabel<span class=\"token operator\">:</span> <span class=\"token string\">'文字'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</code></pre></div><p>createPannelOptions 这个函数的泛型里填入对应的组件，将会给收到的配置项良好的提示。</p>\n<p>在配置项组件里所要做的就是接收组件传来的配置项，然后去修改current的属性：</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token keyword\">function</span> <span class=\"token function\">MInput</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">props<span class=\"token operator\">:</span> MInputProps</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> option <span class=\"token operator\">=</span> <span class=\"token function\">useMemo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> props<span class=\"token punctuation\">.</span>data<span class=\"token operator\">?.</span>option <span class=\"token operator\">||</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>props<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token operator\">&lt;</span>Row style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> padding<span class=\"token operator\">:</span> <span class=\"token string\">'10px 20px'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span>Col span<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">6</span><span class=\"token punctuation\">}</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> lineHeight<span class=\"token operator\">:</span> <span class=\"token string\">'30px'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>option <span class=\"token keyword\">as</span> any<span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>label <span class=\"token operator\">||</span> <span class=\"token string\">'文字'</span><span class=\"token punctuation\">}</span>：\n\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Col<span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span>Col span<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">18</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span>Input\n\t\t\t\t\tvalue<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>option <span class=\"token keyword\">as</span> any<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>receive<span class=\"token punctuation\">]</span> <span class=\"token operator\">||</span> <span class=\"token string\">''</span><span class=\"token punctuation\">}</span>\n\t\t\t\t\tonChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t<span class=\"token keyword\">const</span> receive <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>option <span class=\"token keyword\">as</span> any<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>receive<span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token keyword\">const</span> clonedata <span class=\"token operator\">=</span> <span class=\"token function\">deepCopy</span><span class=\"token punctuation\">(</span>store<span class=\"token punctuation\">.</span><span class=\"token function\">getData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token keyword\">const</span> newblock <span class=\"token operator\">=</span> clonedata<span class=\"token punctuation\">.</span>block<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">v<span class=\"token operator\">:</span> IBlockType</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">.</span>id <span class=\"token operator\">===</span> props<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\t\t\t\tv<span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">[</span>receive<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t\t\t\t\t<span class=\"token keyword\">return</span> v<span class=\"token punctuation\">;</span>\n\t\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t\tstore<span class=\"token punctuation\">.</span><span class=\"token function\">setData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>clonedata<span class=\"token punctuation\">,</span> block<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token operator\">...</span>newblock<span class=\"token punctuation\">]</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t\t\t<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Input<span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Col<span class=\"token operator\">></span>\n\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Row<span class=\"token operator\">></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div><p>由于可以很轻松的拿到store，所以可以在任意地方进行修改数据。</p>\n<p>将组件的value关联current的属性，onChange去修改store，这样就完成了个双向绑定。</p>\n<p>注意：如果你的右侧组件需要用到block以外的属性，可能需要去判断是否处于弹窗模式。</p>\n","metadata":{"title":"右侧组件","sTitle":"dooringx-lib插件开发","order":"13"},"subsections":[{"slug":"5yz5l6n57ue5lu25a85ywl","title":"右侧组件导入","level":2},{"slug":"5yz5l6n57ue5lu25bya5yr","title":"右侧组件开发","level":2}],"slug":"5yz5l6n57ue5lu2","order":13,"file":"3.5.md","sTitle":"dooringx-lib插件开发"},{"html":"\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span  id=\"5zg95luk55qe5a85ywl\"  ></span>\n\t\t\t\t\t\t<a  href=\"docs#5zg95luk55qe5a85ywl\" class=\"anchor\" aria-hidden=\"true\"></a>\n\t\t\t\t\t\t命令的导入\n\t\t\t\t\t</h3><p>命令对象导入到插件的initCommandModule里即可</p>\n<div class='code-block'><pre class='language-javascript'><code>initCommandModule<span class=\"token operator\">:</span> commandModules<span class=\"token punctuation\">,</span></code></pre></div>\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span  id=\"5zg95luk55qe5bya5yr\"  ></span>\n\t\t\t\t\t\t<a  href=\"docs#5zg95luk55qe5bya5yr\" class=\"anchor\" aria-hidden=\"true\"></a>\n\t\t\t\t\t\t命令的开发\n\t\t\t\t\t</h3><p>命令需要导出一个CommanderItemFactory生成的对象。</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> CommanderItemFactory <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'dooringx-lib'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> undo <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">CommanderItemFactory</span><span class=\"token punctuation\">(</span>\n\t<span class=\"token string\">'redo'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'Control+Shift+z'</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">(</span><span class=\"token parameter\">store</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\tstore<span class=\"token punctuation\">.</span><span class=\"token function\">redo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'重做'</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> undo<span class=\"token punctuation\">;</span></code></pre></div><p>第一个参数是注册名。\n第二个参数是快捷键名，快捷键映射是键盘事件key值：</p>\n<div class='code-block'><pre class='language-javascript'><code>\tCancel<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n\tHelp<span class=\"token operator\">:</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span>\n\tBackspace<span class=\"token operator\">:</span> <span class=\"token number\">8</span><span class=\"token punctuation\">,</span>\n\tTab<span class=\"token operator\">:</span> <span class=\"token number\">9</span><span class=\"token punctuation\">,</span>\n\tClear<span class=\"token operator\">:</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span>\n\tEnter<span class=\"token operator\">:</span> <span class=\"token number\">13</span><span class=\"token punctuation\">,</span>\n\tShift<span class=\"token operator\">:</span> <span class=\"token number\">16</span><span class=\"token punctuation\">,</span>\n\tControl<span class=\"token operator\">:</span> <span class=\"token number\">17</span><span class=\"token punctuation\">,</span>\n\tAlt<span class=\"token operator\">:</span> <span class=\"token number\">18</span><span class=\"token punctuation\">,</span>\n\tPause<span class=\"token operator\">:</span> <span class=\"token number\">19</span><span class=\"token punctuation\">,</span>\n\tCapsLock<span class=\"token operator\">:</span> <span class=\"token number\">20</span><span class=\"token punctuation\">,</span>\n\tEscape<span class=\"token operator\">:</span> <span class=\"token number\">27</span><span class=\"token punctuation\">,</span>\n\tConvert<span class=\"token operator\">:</span> <span class=\"token number\">28</span><span class=\"token punctuation\">,</span>\n\tNonConvert<span class=\"token operator\">:</span> <span class=\"token number\">29</span><span class=\"token punctuation\">,</span>\n\tAccept<span class=\"token operator\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span>\n\tModeChange<span class=\"token operator\">:</span> <span class=\"token number\">31</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">' '</span><span class=\"token operator\">:</span> <span class=\"token number\">32</span><span class=\"token punctuation\">,</span>\n\tPageUp<span class=\"token operator\">:</span> <span class=\"token number\">33</span><span class=\"token punctuation\">,</span>\n\tPageDown<span class=\"token operator\">:</span> <span class=\"token number\">34</span><span class=\"token punctuation\">,</span>\n\tEnd<span class=\"token operator\">:</span> <span class=\"token number\">35</span><span class=\"token punctuation\">,</span>\n\tHome<span class=\"token operator\">:</span> <span class=\"token number\">36</span><span class=\"token punctuation\">,</span>\n\tArrowLeft<span class=\"token operator\">:</span> <span class=\"token number\">37</span><span class=\"token punctuation\">,</span>\n\tArrowUp<span class=\"token operator\">:</span> <span class=\"token number\">38</span><span class=\"token punctuation\">,</span>\n\tArrowRight<span class=\"token operator\">:</span> <span class=\"token number\">39</span><span class=\"token punctuation\">,</span>\n\tArrowDown<span class=\"token operator\">:</span> <span class=\"token number\">40</span><span class=\"token punctuation\">,</span>\n\tSelect<span class=\"token operator\">:</span> <span class=\"token number\">41</span><span class=\"token punctuation\">,</span>\n\tPrint<span class=\"token operator\">:</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span>\n\tExecute<span class=\"token operator\">:</span> <span class=\"token number\">43</span><span class=\"token punctuation\">,</span>\n\tPrintScreen<span class=\"token operator\">:</span> <span class=\"token number\">44</span><span class=\"token punctuation\">,</span>\n\tInsert<span class=\"token operator\">:</span> <span class=\"token number\">45</span><span class=\"token punctuation\">,</span>\n\tDelete<span class=\"token operator\">:</span> <span class=\"token number\">46</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token number\">0</span><span class=\"token operator\">:</span> <span class=\"token number\">48</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">')'</span><span class=\"token operator\">:</span> <span class=\"token number\">48</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token number\">1</span><span class=\"token operator\">:</span> <span class=\"token number\">49</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'!'</span><span class=\"token operator\">:</span> <span class=\"token number\">49</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token number\">2</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'@'</span><span class=\"token operator\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token number\">3</span><span class=\"token operator\">:</span> <span class=\"token number\">51</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'#'</span><span class=\"token operator\">:</span> <span class=\"token number\">51</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token number\">4</span><span class=\"token operator\">:</span> <span class=\"token number\">52</span><span class=\"token punctuation\">,</span>\n\t$<span class=\"token operator\">:</span> <span class=\"token number\">52</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token number\">5</span><span class=\"token operator\">:</span> <span class=\"token number\">53</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'%'</span><span class=\"token operator\">:</span> <span class=\"token number\">53</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token number\">6</span><span class=\"token operator\">:</span> <span class=\"token number\">54</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'^'</span><span class=\"token operator\">:</span> <span class=\"token number\">54</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token number\">7</span><span class=\"token operator\">:</span> <span class=\"token number\">55</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'&amp;'</span><span class=\"token operator\">:</span> <span class=\"token number\">55</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token number\">8</span><span class=\"token operator\">:</span> <span class=\"token number\">56</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'*'</span><span class=\"token operator\">:</span> <span class=\"token number\">56</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token number\">9</span><span class=\"token operator\">:</span> <span class=\"token number\">57</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'('</span><span class=\"token operator\">:</span> <span class=\"token number\">57</span><span class=\"token punctuation\">,</span>\n\ta<span class=\"token operator\">:</span> <span class=\"token number\">65</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">A</span><span class=\"token operator\">:</span> <span class=\"token number\">65</span><span class=\"token punctuation\">,</span>\n\tb<span class=\"token operator\">:</span> <span class=\"token number\">66</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">B</span><span class=\"token operator\">:</span> <span class=\"token number\">66</span><span class=\"token punctuation\">,</span>\n\tc<span class=\"token operator\">:</span> <span class=\"token number\">67</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">C</span><span class=\"token operator\">:</span> <span class=\"token number\">67</span><span class=\"token punctuation\">,</span>\n\td<span class=\"token operator\">:</span> <span class=\"token number\">68</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">D</span><span class=\"token operator\">:</span> <span class=\"token number\">68</span><span class=\"token punctuation\">,</span>\n\te<span class=\"token operator\">:</span> <span class=\"token number\">69</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">E</span><span class=\"token operator\">:</span> <span class=\"token number\">69</span><span class=\"token punctuation\">,</span>\n\tf<span class=\"token operator\">:</span> <span class=\"token number\">70</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F</span><span class=\"token operator\">:</span> <span class=\"token number\">70</span><span class=\"token punctuation\">,</span>\n\tg<span class=\"token operator\">:</span> <span class=\"token number\">71</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">G</span><span class=\"token operator\">:</span> <span class=\"token number\">71</span><span class=\"token punctuation\">,</span>\n\th<span class=\"token operator\">:</span> <span class=\"token number\">72</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">H</span><span class=\"token operator\">:</span> <span class=\"token number\">72</span><span class=\"token punctuation\">,</span>\n\ti<span class=\"token operator\">:</span> <span class=\"token number\">73</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">I</span><span class=\"token operator\">:</span> <span class=\"token number\">73</span><span class=\"token punctuation\">,</span>\n\tj<span class=\"token operator\">:</span> <span class=\"token number\">74</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">J</span><span class=\"token operator\">:</span> <span class=\"token number\">74</span><span class=\"token punctuation\">,</span>\n\tk<span class=\"token operator\">:</span> <span class=\"token number\">75</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">K</span><span class=\"token operator\">:</span> <span class=\"token number\">75</span><span class=\"token punctuation\">,</span>\n\tl<span class=\"token operator\">:</span> <span class=\"token number\">76</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">L</span><span class=\"token operator\">:</span> <span class=\"token number\">76</span><span class=\"token punctuation\">,</span>\n\tm<span class=\"token operator\">:</span> <span class=\"token number\">77</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">M</span><span class=\"token operator\">:</span> <span class=\"token number\">77</span><span class=\"token punctuation\">,</span>\n\tn<span class=\"token operator\">:</span> <span class=\"token number\">78</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">N</span><span class=\"token operator\">:</span> <span class=\"token number\">78</span><span class=\"token punctuation\">,</span>\n\to<span class=\"token operator\">:</span> <span class=\"token number\">79</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">O</span><span class=\"token operator\">:</span> <span class=\"token number\">79</span><span class=\"token punctuation\">,</span>\n\tp<span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">P</span><span class=\"token operator\">:</span> <span class=\"token number\">80</span><span class=\"token punctuation\">,</span>\n\tq<span class=\"token operator\">:</span> <span class=\"token number\">81</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">Q</span><span class=\"token operator\">:</span> <span class=\"token number\">81</span><span class=\"token punctuation\">,</span>\n\tr<span class=\"token operator\">:</span> <span class=\"token number\">82</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">R</span><span class=\"token operator\">:</span> <span class=\"token number\">82</span><span class=\"token punctuation\">,</span>\n\ts<span class=\"token operator\">:</span> <span class=\"token number\">83</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">S</span><span class=\"token operator\">:</span> <span class=\"token number\">83</span><span class=\"token punctuation\">,</span>\n\tt<span class=\"token operator\">:</span> <span class=\"token number\">84</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">T</span><span class=\"token operator\">:</span> <span class=\"token number\">84</span><span class=\"token punctuation\">,</span>\n\tu<span class=\"token operator\">:</span> <span class=\"token number\">85</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">U</span><span class=\"token operator\">:</span> <span class=\"token number\">85</span><span class=\"token punctuation\">,</span>\n\tv<span class=\"token operator\">:</span> <span class=\"token number\">86</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">V</span><span class=\"token operator\">:</span> <span class=\"token number\">86</span><span class=\"token punctuation\">,</span>\n\tw<span class=\"token operator\">:</span> <span class=\"token number\">87</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">W</span><span class=\"token operator\">:</span> <span class=\"token number\">87</span><span class=\"token punctuation\">,</span>\n\tx<span class=\"token operator\">:</span> <span class=\"token number\">88</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">X</span><span class=\"token operator\">:</span> <span class=\"token number\">88</span><span class=\"token punctuation\">,</span>\n\ty<span class=\"token operator\">:</span> <span class=\"token number\">89</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">Y</span><span class=\"token operator\">:</span> <span class=\"token number\">89</span><span class=\"token punctuation\">,</span>\n\tz<span class=\"token operator\">:</span> <span class=\"token number\">90</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">Z</span><span class=\"token operator\">:</span> <span class=\"token number\">90</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">OS</span><span class=\"token operator\">:</span> <span class=\"token number\">91</span><span class=\"token punctuation\">,</span>\n\tContextMenu<span class=\"token operator\">:</span> <span class=\"token number\">93</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F1</span><span class=\"token operator\">:</span> <span class=\"token number\">112</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F2</span><span class=\"token operator\">:</span> <span class=\"token number\">113</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F3</span><span class=\"token operator\">:</span> <span class=\"token number\">114</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F4</span><span class=\"token operator\">:</span> <span class=\"token number\">115</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F5</span><span class=\"token operator\">:</span> <span class=\"token number\">116</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F6</span><span class=\"token operator\">:</span> <span class=\"token number\">117</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F7</span><span class=\"token operator\">:</span> <span class=\"token number\">118</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F8</span><span class=\"token operator\">:</span> <span class=\"token number\">119</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F9</span><span class=\"token operator\">:</span> <span class=\"token number\">120</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F10</span><span class=\"token operator\">:</span> <span class=\"token number\">121</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F11</span><span class=\"token operator\">:</span> <span class=\"token number\">122</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F12</span><span class=\"token operator\">:</span> <span class=\"token number\">123</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F13</span><span class=\"token operator\">:</span> <span class=\"token number\">124</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F14</span><span class=\"token operator\">:</span> <span class=\"token number\">125</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F15</span><span class=\"token operator\">:</span> <span class=\"token number\">126</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F16</span><span class=\"token operator\">:</span> <span class=\"token number\">127</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F17</span><span class=\"token operator\">:</span> <span class=\"token number\">128</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F18</span><span class=\"token operator\">:</span> <span class=\"token number\">129</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F19</span><span class=\"token operator\">:</span> <span class=\"token number\">130</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F20</span><span class=\"token operator\">:</span> <span class=\"token number\">131</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F21</span><span class=\"token operator\">:</span> <span class=\"token number\">132</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F22</span><span class=\"token operator\">:</span> <span class=\"token number\">133</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F23</span><span class=\"token operator\">:</span> <span class=\"token number\">134</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token constant\">F24</span><span class=\"token operator\">:</span> <span class=\"token number\">135</span><span class=\"token punctuation\">,</span>\n\tNumLock<span class=\"token operator\">:</span> <span class=\"token number\">144</span><span class=\"token punctuation\">,</span>\n\tScrollLock<span class=\"token operator\">:</span> <span class=\"token number\">145</span><span class=\"token punctuation\">,</span>\n\tVolumeMute<span class=\"token operator\">:</span> <span class=\"token number\">181</span><span class=\"token punctuation\">,</span>\n\tVolumeDown<span class=\"token operator\">:</span> <span class=\"token number\">182</span><span class=\"token punctuation\">,</span>\n\tVolumeUp<span class=\"token operator\">:</span> <span class=\"token number\">183</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">';'</span><span class=\"token operator\">:</span> <span class=\"token number\">186</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">':'</span><span class=\"token operator\">:</span> <span class=\"token number\">186</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'='</span><span class=\"token operator\">:</span> <span class=\"token number\">187</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'+'</span><span class=\"token operator\">:</span> <span class=\"token number\">187</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">','</span><span class=\"token operator\">:</span> <span class=\"token number\">188</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'&lt;'</span><span class=\"token operator\">:</span> <span class=\"token number\">188</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'-'</span><span class=\"token operator\">:</span> <span class=\"token number\">189</span><span class=\"token punctuation\">,</span>\n\t_<span class=\"token operator\">:</span> <span class=\"token number\">189</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'.'</span><span class=\"token operator\">:</span> <span class=\"token number\">190</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'>'</span><span class=\"token operator\">:</span> <span class=\"token number\">190</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'/'</span><span class=\"token operator\">:</span> <span class=\"token number\">191</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'?'</span><span class=\"token operator\">:</span> <span class=\"token number\">191</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'`'</span><span class=\"token operator\">:</span> <span class=\"token number\">192</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'~'</span><span class=\"token operator\">:</span> <span class=\"token number\">192</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'['</span><span class=\"token operator\">:</span> <span class=\"token number\">219</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'{'</span><span class=\"token operator\">:</span> <span class=\"token number\">219</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'\\\\'</span><span class=\"token operator\">:</span> <span class=\"token number\">220</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'|'</span><span class=\"token operator\">:</span> <span class=\"token number\">220</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">']'</span><span class=\"token operator\">:</span> <span class=\"token number\">221</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'}'</span><span class=\"token operator\">:</span> <span class=\"token number\">221</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">\"'\"</span><span class=\"token operator\">:</span> <span class=\"token number\">222</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token string\">'\"'</span><span class=\"token operator\">:</span> <span class=\"token number\">222</span><span class=\"token punctuation\">,</span>\n\tMeta<span class=\"token operator\">:</span> <span class=\"token number\">224</span><span class=\"token punctuation\">,</span>\n\tAltGraph<span class=\"token operator\">:</span> <span class=\"token number\">225</span><span class=\"token punctuation\">,</span>\n\tAttn<span class=\"token operator\">:</span> <span class=\"token number\">246</span><span class=\"token punctuation\">,</span>\n\tCrSel<span class=\"token operator\">:</span> <span class=\"token number\">247</span><span class=\"token punctuation\">,</span>\n\tExSel<span class=\"token operator\">:</span> <span class=\"token number\">248</span><span class=\"token punctuation\">,</span>\n\tEraseEof<span class=\"token operator\">:</span> <span class=\"token number\">249</span><span class=\"token punctuation\">,</span>\n\tPlay<span class=\"token operator\">:</span> <span class=\"token number\">250</span><span class=\"token punctuation\">,</span>\n\tZoomOut<span class=\"token operator\">:</span> <span class=\"token number\">251</span><span class=\"token punctuation\">,</span></code></pre></div><p>26个英文字母是忽略大小写的，一个命令目前只能注册一个快捷键。不需要注册快捷键则填空字符串即可。</p>\n<p>metakey与Controlkey相同，写Control即可。</p>\n<p>目前第三个参数只能获得store，后续需要修改下。 0.2.0 版本第二个参数可以获得config，同时commander不从index中导出，需要使用时从config中获取。</p>\n<p>最后个参数是展示名。</p>\n","metadata":{"title":"命令","sTitle":"dooringx-lib插件开发","order":"14"},"subsections":[{"slug":"5zg95luk55qe5a85ywl","title":"命令的导入","level":2},{"slug":"5zg95luk55qe5bya5yr","title":"命令的开发","level":2}],"slug":"5zg95luk","order":14,"file":"3.6.md","sTitle":"dooringx-lib插件开发"},{"html":"<p>右键菜单可以进行自定义：</p>\n<div class='code-block'><pre class='language-javascript'><code><span class=\"token comment\">// 自定义右键</span>\n<span class=\"token keyword\">const</span> contextMenuState <span class=\"token operator\">=</span> config<span class=\"token punctuation\">.</span><span class=\"token function\">getContextMenuState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> unmountContextMenu <span class=\"token operator\">=</span> contextMenuState<span class=\"token punctuation\">.</span>unmountContextMenu<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> commander <span class=\"token operator\">=</span> config<span class=\"token punctuation\">.</span><span class=\"token function\">getCommanderRegister</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">ContextMenu</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleclick</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">unmountContextMenu</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">const</span> forceUpdate <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\tcontextMenuState<span class=\"token punctuation\">.</span><span class=\"token function-variable function\">forceUpdate</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">forceUpdate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">pre</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> pre <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n\t\t<span class=\"token operator\">&lt;</span>div\n\t\t\tstyle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n\t\t\t\tleft<span class=\"token operator\">:</span> contextMenuState<span class=\"token punctuation\">.</span>left<span class=\"token punctuation\">,</span>\n\t\t\t\ttop<span class=\"token operator\">:</span> contextMenuState<span class=\"token punctuation\">.</span>top<span class=\"token punctuation\">,</span>\n\t\t\t\tposition<span class=\"token operator\">:</span> <span class=\"token string\">'fixed'</span><span class=\"token punctuation\">,</span>\n\t\t\t\tbackground<span class=\"token operator\">:</span> <span class=\"token string\">'rgb(24, 23, 23)'</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t<span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span>div\n\t\t\t\tstyle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> width<span class=\"token operator\">:</span> <span class=\"token string\">'100%'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t\t\tonClick<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t\t\t\tcommander<span class=\"token punctuation\">.</span><span class=\"token function\">exec</span><span class=\"token punctuation\">(</span><span class=\"token string\">'redo'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t\t<span class=\"token function\">handleclick</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token operator\">></span>\n\t\t\t\t<span class=\"token operator\">&lt;</span>Button<span class=\"token operator\">></span>自定义<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Button<span class=\"token operator\">></span>\n\t\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\t\t<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\ncontextMenuState<span class=\"token punctuation\">.</span>contextMenu <span class=\"token operator\">=</span> <span class=\"token operator\">&lt;</span>ContextMenu<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>ContextMenu<span class=\"token operator\">></span><span class=\"token punctuation\">;</span></code></pre></div><p>先拿到contextMenuState，contextMenuState上有个unmountContextMenu是关闭右键菜单方法。</p>\n<p>所以在点击后需要调用关闭。</p>\n<p>同时上面的left和top是右键的位置。</p>\n<p>另外，你还需要在组件内增加个强刷赋值给forceUpdate，用于在组件移动时进行跟随。</p>\n","metadata":{"title":"右键菜单","sTitle":"dooringx-lib插件开发","order":"15"},"subsections":[],"slug":"5yz6zsu6ic5y2v","order":15,"file":"3.7.md","sTitle":"dooringx-lib插件开发"},{"html":"\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span  id=\"5ye95pww5a85ywl\"  ></span>\n\t\t\t\t\t\t<a  href=\"docs#5ye95pww5a85ywl\" class=\"anchor\" aria-hidden=\"true\"></a>\n\t\t\t\t\t\t函数导入\n\t\t\t\t\t</h3><p>函数导入做成对象置入initFunctionMap即可</p>\n<div class='code-block'><pre class='language-javascript'><code>initFunctionMap<span class=\"token operator\">:</span> functionMap<span class=\"token punctuation\">,</span></code></pre></div>\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span  id=\"5ye95pww5bya5yr\"  ></span>\n\t\t\t\t\t\t<a  href=\"docs#5ye95pww5bya5yr\" class=\"anchor\" aria-hidden=\"true\"></a>\n\t\t\t\t\t\t函数开发\n\t\t\t\t\t</h3><p>键名会显示出来所以键名是唯一的。</p>\n<p>它的值是2个对象，一个是函数内容fn，一个是配置项config。</p>\n<p>config中的数组里每个配置会显示出来让用户去配置，name则是展示名字，data代表数据去哪里获取，可以选择从输入框（input），数据源（dataSource）,上下文（ctx）中获取，另外还有个特殊的弹窗（modal）。</p>\n<p>options中的receive表示会从args哪个键上获取该值。</p>\n<p>multi代表是否允许多个选项配置。</p>\n<p>dooringx-lib中写好了2个函数changeUserValue与changeUserValueRecord，第一个函数会将得到的结果做成数组，如果非multi则取第一个结果就行。而第二个函数会将结果做成对象，比如用户在数据源中选了keya，那么就会把数据源的键值对作为个对象返回。</p>\n<p>fn中，第一个ctx参数代表上下文，如果有转换函数之类，可能需要使用（比如要把第一个函数的结果导给后面的函数）</p>\n<p>第二个参数next是需要运行完毕后执行的，否则事件链会一直在该函数中不退出。</p>\n<p>第三个参数config就可以拿到整个config对象。</p>\n<p>第四个参数args是用户填写的参数，会根据options里填写的字段进行返回。</p>\n<p>第五个是eventList，可以获取整个事件链的参数。</p>\n<p>第六个参数iname可以拿到用户的选择项。</p>\n<div class='code-block'><pre class='language-javascript'><code> 通用<span class=\"token constant\">GET</span>请求函数<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function-variable function\">fn</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">ctx<span class=\"token punctuation\">,</span> next<span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">,</span> args<span class=\"token punctuation\">,</span> _eventList<span class=\"token punctuation\">,</span> iname</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>args<span class=\"token punctuation\">,</span> <span class=\"token string\">'参数x'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t  <span class=\"token keyword\">const</span> userSelect <span class=\"token operator\">=</span> iname<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\t  <span class=\"token keyword\">const</span> urlVal <span class=\"token operator\">=</span> <span class=\"token function\">changeUserValue</span><span class=\"token punctuation\">(</span>\n\t\tuserSelect<span class=\"token punctuation\">[</span><span class=\"token string\">'请求url'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\targs<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">'_url'</span><span class=\"token punctuation\">,</span>\n\t\tconfig<span class=\"token punctuation\">,</span>\n\t\tctx\n\t  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// input datasource ctx //datasource会去取值 ，ctx取ctx上字段</span>\n\t  <span class=\"token keyword\">const</span> paramSource <span class=\"token operator\">=</span> <span class=\"token function\">changeUserValueRecord</span><span class=\"token punctuation\">(</span>\n\t\t<span class=\"token comment\">// 设定只能从datasource或者ctx里取</span>\n\t\tuserSelect<span class=\"token punctuation\">[</span><span class=\"token string\">'请求参数'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\targs<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">'_origin'</span><span class=\"token punctuation\">,</span>\n\t\tconfig<span class=\"token punctuation\">,</span>\n\t\tctx\n\t  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t  <span class=\"token keyword\">const</span> ctxVal <span class=\"token operator\">=</span> <span class=\"token function\">changeUserValue</span><span class=\"token punctuation\">(</span>\n\t\tuserSelect<span class=\"token punctuation\">[</span><span class=\"token string\">'返回上下文字段'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\targs<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token string\">'_ctx'</span><span class=\"token punctuation\">,</span>\n\t\tconfig<span class=\"token punctuation\">,</span>\n\t\tctx\n\t  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t  <span class=\"token comment\">// 检查参数是否存在</span>\n\t  <span class=\"token comment\">// 都是数组，非multi则取第一个。</span>\n\t  <span class=\"token keyword\">const</span> url <span class=\"token operator\">=</span> urlVal<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>url<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t  <span class=\"token punctuation\">}</span>\n\t  <span class=\"token keyword\">const</span> ctxKey <span class=\"token operator\">=</span> ctxVal<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n\t  axios\n\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>url<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\t\t  params<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token operator\">...</span>paramSource<span class=\"token punctuation\">,</span>\n\t\t  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">res</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> res<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">;</span>\n\t\t  ctx<span class=\"token punctuation\">[</span>ctxKey<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\n\t\t  <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t\t  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t  <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\tconfig<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n\t  <span class=\"token punctuation\">{</span>\n\t\tname<span class=\"token operator\">:</span> <span class=\"token string\">'请求url'</span><span class=\"token punctuation\">,</span>\n\t\tdata<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'dataSource'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ctx'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'input'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\toptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t\t  receive<span class=\"token operator\">:</span> <span class=\"token string\">'_url'</span><span class=\"token punctuation\">,</span>\n\t\t  multi<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t  <span class=\"token punctuation\">{</span>\n\t\tname<span class=\"token operator\">:</span> <span class=\"token string\">'请求参数'</span><span class=\"token punctuation\">,</span>\n\t\tdata<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'dataSource'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'ctx'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\toptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t\t  receive<span class=\"token operator\">:</span> <span class=\"token string\">'_origin'</span><span class=\"token punctuation\">,</span>\n\t\t  multi<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t  <span class=\"token punctuation\">{</span>\n\t\tname<span class=\"token operator\">:</span> <span class=\"token string\">'返回上下文字段'</span><span class=\"token punctuation\">,</span>\n\t\tdata<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'input'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n\t\toptions<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t\t  receive<span class=\"token operator\">:</span> <span class=\"token string\">'_ctx'</span><span class=\"token punctuation\">,</span>\n\t\t  multi<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n\t\t\t\t\t<h3>\n\t\t\t\t\t\t<span  id=\"5pe25py65lio5ye95pww6kof6l29\"  ></span>\n\t\t\t\t\t\t<a  href=\"docs#5pe25py65lio5ye95pww6kof6l29\" class=\"anchor\" aria-hidden=\"true\"></a>\n\t\t\t\t\t\t时机与函数装载\n\t\t\t\t\t</h3><p>如果有需要，一般使用：</p>\n<div class='code-block'><pre class='language-javascript'><code>\teventCenter<span class=\"token punctuation\">.</span><span class=\"token function\">manualUpdateMap</span><span class=\"token punctuation\">(</span>cur<span class=\"token punctuation\">,</span> displayName<span class=\"token punctuation\">,</span> arr<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div><p> manualUpdateMap第一个是时机名，第二个是展示名，第三个是用户选择。</p>\n<p> 更新事件中心后还需要更新store，结果以store为准。</p>\n","metadata":{"title":"函数","sTitle":"dooringx-lib插件开发","order":"16"},"subsections":[{"slug":"5ye95pww5a85ywl","title":"函数导入","level":2},{"slug":"5ye95pww5bya5yr","title":"函数开发","level":2},{"slug":"5pe25py65lio5ye95pww6kof6l29","title":"时机与函数装载","level":2}],"slug":"5ye95pww","order":16,"file":"3.8.md","sTitle":"dooringx-lib插件开发"},{"html":"<p>请使用fast-deep-equal比对所需要的数据，如果相同，则忽略更新即可。</p>\n","metadata":{"title":"图表在位移时不断刷新","sTitle":"常见问题","order":"17"},"subsections":[],"slug":"5zu6kgo5zyo5l2n56e75pe25lin5pat5yi35paw","order":17,"file":"4.1.md","sTitle":"常见问题"},{"html":"<p>绝对定位组件必须有初始宽高，虽然在拖拽中会给组件加上宽高，但如果用户一开始就未拖动，则组件无宽高，不止影响选中判定，也会影响最后预览的计算。</p>\n","metadata":{"title":"无法选中组件或预览适配有问题","sTitle":"常见问题","order":"18"},"subsections":[],"slug":"5peg5rov6ycj5lit57ue5lu25oiw6ake6kei6ycc6ywn5pyj6zeu6aky","order":18,"file":"4.2.md","sTitle":"常见问题"},{"html":"<p>组件函数需要在组件卸载时调用卸载方法，否则一直存在。</p>\n","metadata":{"title":"组件动态注册的函数会一直保留","sTitle":"常见问题","order":"19"},"subsections":[],"slug":"57ue5lu25yqo5ocb5roo5yam55qe5ye95pww5lya5lia55u05ld55wz","order":19,"file":"4.3.md","sTitle":"常见问题"},{"html":"<p>表单验证提交有非常多的做法，因为数据全部是联通的，或者直接写个表单组件也可以。</p>\n<p>在不使用表单组件时，简单的做法是为每个输入组件做个验证函数与提交函数。</p>\n<p>这样是否验证就取决于用户的选取，而抛出的输入可以让用户选择放到哪，并由用户去命名变量。</p>\n<p>在点击提交按钮时，调用所有组件的验证函数与提交函数，使其抛给上下文，再通过上下文聚合函数聚合成对象，最后可以通过发送函数发送给对应后端，从而完成整个流程。你可以在example中试下这个demo。</p>\n<p>如果操作人员能看懂后端提供的接口文档，那么就可以让操作人员自己通过命名来拼出后端想要的字段。</p>\n<p>如果不需要文档，那么某些值也可以在开发时写死。</p>\n<p>另外的做法是可以专门写个提交按钮，固定了参数，以及部分规则，比如规定在页面中的所有表单都会被收集提交。</p>\n<p>那么我们可以利用数据源，将所有表单输出内容自动提交给数据源，最后的提交按钮按数据源规定格式的key提取，发送给后端。</p>\n","metadata":{"title":"表单验证提交思路","sTitle":"常见问题","order":"20"},"subsections":[],"slug":"6kgo5y2v6aqm6kb5oq5lqk5ocd6lev","order":20,"file":"4.4.md","sTitle":"常见问题"}]